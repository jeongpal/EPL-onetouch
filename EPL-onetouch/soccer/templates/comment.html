<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>comment</title>
    <meta charset="utf-8"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>comment</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
            $(document).ready(function () {
            show_comment();
        })

            function save_comment() {
            let title = $('#title').val()
            let comment = $('#comment').val()

            $.ajax({
            type: "POST",
            url: "/wfootball",
            data: {'title_give': title, 'comment_give': comment},
            success: function (response) {
            alert(response["msg"])
            window.location.reload()
        }
        });
        }

            function show_comment() {
            $('#comment-list').empty()
            $.ajax({
            type: "GET",
            url: "/wfootball",
            data: {},
            success: function (response) {
            let rows = response['comments']
            for (let i = 0; i < rows.length; i++) {
            let title = rows[i]['title']
            let comment = rows[i]['comment']

            let temp_html = `<p class="mb-0">${title} <br> ${comment}<br><br></p>`
            $('#comment-list').append(temp_html)
        }
        }
        });
        }
    </script>
</head>
<body>
<header class="py-5">
    <div class="container px-lg-5">
        <div class="p-4 p-lg-5 bg-light rounded-3 text-center">
            <div class="m-4 m-lg-5">
                <br>
                <br>
                <select class="form-select" style="margin-top: 10px" id="title">
                    <option selected>팀 선택...</option>
                    <option value="arsenal">arsenal</option>
                    <option value="Manchester City">Manchester City</option>
                    <option value="Leeds United">Leeds United</option>
                    <option value="Tottenham Hotspur">Tottenham Hotspur</option>
                    <option value="Brighton and Hove Albion">Brighton and Hove Albion</option>
                    <option value="Newcastle United">Newcastle United</option>
                    <option value="Fulham">Fulham</option>
                    <option value="Brentford">Brentford</option>
                    <option value="Crystal Palace">Crystal Palace</option>
                    <option value="Nottingham Forest">Nottingham Forest</option>
                    <option value="Southampton">Southampton</option>
                    <option value="Chelsea">Chelsea</option>
                    <option value="Aston Villa">Aston Villa</option>
                    <option value="Bournemouth">Bournemouth</option>
                    <option value="Liverpool">Liverpool</option>
                    <option value="Everton">Everton</option>
                    <option value="Wolverhampton Wanderers">Wolverhampton Wanderers</option>
                    <option value="Leicester City">Leicester City</option>
                    <option value="Manchester United">Manchester United</option>
                    <option value="West Ham United">West Ham United</option>
                </select>
            </div>
            <div class="form-floating" style="margin: auto 50px auto 50px">
                                            <textarea class="form-control" placeholder="Leave a comment here"
                                                      style="height: 100px" id="comment"></textarea>
                <label for="floatingTextarea2">응원</label>
            </div>
            <button class="btn btn-primary" type="submit" style="margin-top: 10px" onclick="save_comment()">저장</button>
            <br><br>
            <div class="card-body text-center p-4 p-lg-5 pt-0 pt-lg-0">
                <h4>
                    <div id="comment-list"></div>
                </h4>
            </div>
        </div>
    </div>
    </div>
</header>
</body>
</html>